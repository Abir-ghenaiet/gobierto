<% content_for :breadcrumb_current_item do %>
  <h1>
    <%= link_to t('.events'), gobierto_participation_participation_events_path %>
  </h1>
<% end %>

<%= content_for :body_attributes do %>
  class="theme-participation gobierto_participation"
<% end %>

<div class="gradient-bg">
  <div class="column">

    <div class="pure-g">
      <div class="pure-u-1 pure-u-lg-1-3">
        <div class="content_side">
          <div>
            <small><%= link_to t('.all_events'), gobierto_participation_participation_events_path %></small>
          </div>

          <div class="calendar-component m_v_2">
            <%= month_calendar(
              partial: "gobierto_people/person_events/calendar_template",
              events: @events,
              attribute: :starts_at,
              start_date: params[:start_date] || Date.current
            ) do |date, events| %>
              <%= link_to_if events.any?, date.day, date: date, start_date: params[:start_date] %>
            <% end %>
          </div>

          <h4 class="with_light_separator m_t_1">Filtrar por tema</h4>

          <ul class="link_list">
            <% @issues.each do |issue| %>
              <li>
                <%= link_to issue.name , gobierto_participation_participation_events_path(issue_id: issue.slug) %>
              </li>
            <% end %>
          </ul>

        </div>
      </div>


      <div class="pure-u-1 pure-u-lg-2-3">
        <% if @events.any? %>
          <div class="events_list">
            <% @events.each do |event| %>
              <%= render 'gobierto_participation/events/event_teaser', event: event %>
            <% end %>
          </div>
        <% else %>
          No hay eventos
        <% end %>

        <%= paginate @events, window: 3, outer_window: 2 %>

      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
$('.attend_event').click(function() {
  $(this).find('.fa').toggleClass('hidden');
  $(this).toggleClass('checked');

  // Swap text
  $(this).find('span').toggleText('Quiero asistir', 'Asistir√°s');
});
</script>
